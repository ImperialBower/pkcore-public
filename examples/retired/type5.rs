use pkcore::analysis::store::db::headsup_preflop_result::HUPResult;
use pkcore::arrays::matchups::masked::Masked;
use pkcore::Shifty;
use std::str::FromStr;

/// This is our first Masked shift defect case.
///
/// K♠ 7♦ - T♠ 3♣
/// Type 5 defect
///
/// Type1223
///
/// ```txt
/// Type1223a - High suits equal
/// K♠ 7♥ (1086012) T♠ 3♦ (614275) ties: (12017)
/// K♠ 7♥ (1086012) T♠ 3♣ (614275) ties: (12017)
/// K♠ 7♦ (1086012) T♠ 3♥ (614275) ties: (12017)
/// K♠ 7♦ (1086012) T♠ 3♣ (614275) ties: (12017)
/// K♠ 7♣ (1086012) T♠ 3♥ (614275) ties: (12017)
/// K♠ 7♣ (1086012) T♠ 3♦ (614275) ties: (12017)
/// K♥ 7♠ (1086012) T♥ 3♦ (614275) ties: (12017)
/// K♥ 7♠ (1086012) T♥ 3♣ (614275) ties: (12017)
/// K♥ 7♦ (1086012) T♥ 3♣ (614275) ties: (12017)
/// K♥ 7♦ (1086012) T♥ 3♠ (614275) ties: (12017)
/// K♥ 7♣ (1086012) T♥ 3♦ (614275) ties: (12017)
/// K♥ 7♣ (1086012) T♥ 3♠ (614275) ties: (12017)
/// K♦ 7♣ (1086012) T♦ 3♥ (614275) ties: (12017)
/// K♦ 7♠ (1086012) T♦ 3♣ (614275) ties: (12017)
/// K♦ 7♠ (1086012) T♦ 3♥ (614275) ties: (12017)
/// K♦ 7♥ (1086012) T♦ 3♣ (614275) ties: (12017)
/// K♦ 7♣ (1086012) T♦ 3♠ (614275) ties: (12017)
/// K♦ 7♥ (1086012) T♦ 3♠ (614275) ties: (12017)
/// K♣ 7♥ (1086012) T♣ 3♠ (614275) ties: (12017)
/// K♣ 7♠ (1086012) T♣ 3♦ (614275) ties: (12017)
/// K♣ 7♦ (1086012) T♣ 3♠ (614275) ties: (12017)
/// K♣ 7♠ (1086012) T♣ 3♥ (614275) ties: (12017)
/// K♣ 7♥ (1086012) T♣ 3♦ (614275) ties: (12017)
/// K♣ 7♦ (1086012) T♣ 3♥ (614275) ties: (12017)
///
/// Type1223b - high suit matches low suit
/// K♦ 7♠ (1086013) T♣ 3♦ (614710) ties: (11581)
/// K♦ 7♥ (1086013) T♠ 3♦ (614710) ties: (11581)
/// K♥ 7♦ (1086013) T♠ 3♥ (614710) ties: (11581)
/// K♣ 7♠ (1086013) T♦ 3♣ (614710) ties: (11581)
/// K♠ 7♦ (1086013) T♥ 3♠ (614710) ties: (11581)
/// K♣ 7♦ (1086013) T♠ 3♣ (614710) ties: (11581)
/// K♥ 7♠ (1086013) T♣ 3♥ (614710) ties: (11581)
/// K♠ 7♣ (1086013) T♦ 3♠ (614710) ties: (11581)
/// K♦ 7♠ (1086013) T♥ 3♦ (614710) ties: (11581)
/// K♠ 7♥ (1086013) T♣ 3♠ (614710) ties: (11581)
/// K♠ 7♦ (1086013) T♣ 3♠ (614710) ties: (11581)
/// K♣ 7♥ (1086013) T♦ 3♣ (614710) ties: (11581)
/// K♣ 7♦ (1086013) T♥ 3♣ (614710) ties: (11581)
/// K♦ 7♥ (1086013) T♣ 3♦ (614710) ties: (11581)
/// K♥ 7♣ (1086013) T♦ 3♥ (614710) ties: (11581)
/// K♣ 7♥ (1086013) T♠ 3♣ (614710) ties: (11581)
/// K♠ 7♣ (1086013) T♥ 3♠ (614710) ties: (11581)
/// K♦ 7♣ (1086013) T♠ 3♦ (614710) ties: (11581)
/// K♥ 7♣ (1086013) T♠ 3♥ (614710) ties: (11581)
/// K♦ 7♣ (1086013) T♥ 3♦ (614710) ties: (11581)
/// K♥ 7♠ (1086013) T♦ 3♥ (614710) ties: (11581)
/// K♣ 7♠ (1086013) T♥ 3♣ (614710) ties: (11581)
/// K♥ 7♦ (1086013) T♣ 3♥ (614710) ties: (11581)
/// K♠ 7♥ (1086013) T♦ 3♠ (614710) ties: (11581)
///
/// Type1223c - low suit matches high suit
/// 1. K♥ 7♠ (1074500) T♠ 3♦ (625803) ties: (12001)
/// 2. K♠ 7♣ (1074500) T♣ 3♦ (625803) ties: (12001)
/// 3. K♣ 7♥ (1074500) T♥ 3♦ (625803) ties: (12001)
/// 4. K♦ 7♠ (1074500) T♠ 3♣ (625803) ties: (12001)
/// 5. K♥ 7♣ (1074500) T♣ 3♠ (625803) ties: (12001)
/// 6. K♦ 7♠ (1074500) T♠ 3♥ (625803) ties: (12001)
/// 7. K♣ 7♦ (1074500) T♦ 3♠ (625803) ties: (12001)
/// 8. K♠ 7♦ (1074500) T♦ 3♥ (625803) ties: (12001)
/// 9. K♣ 7♦ (1074500) T♦ 3♥ (625803) ties: (12001)
/// 10.K♥ 7♦ (1074500) T♦ 3♠ (625803) ties: (12001)
/// 11.K♥ 7♣ (1074500) T♣ 3♦ (625803) ties: (12001)
/// 12.K♦ 7♣ (1074500) T♣ 3♥ (625803) ties: (12001)
/// 13.K♦ 7♣ (1074500) T♣ 3♠ (625803) ties: (12001)
/// 14.K♦ 7♥ (1074500) T♥ 3♣ (625803) ties: (12001)
/// 15.K♦ 7♥ (1074500) T♥ 3♠ (625803) ties: (12001)
/// 16.K♠ 7♥ (1074500) T♥ 3♣ (625803) ties: (12001)
/// 17.K♣ 7♠ (1074500) T♠ 3♦ (625803) ties: (12001)
/// 18.K♥ 7♠ (1074500) T♠ 3♣ (625803) ties: (12001)
/// 19.K♠ 7♦ (1074500) T♦ 3♣ (625803) ties: (12001)
/// 20.K♠ 7♥ (1074500) T♥ 3♦ (625803) ties: (12001)
/// 21.K♠ 7♣ (1074500) T♣ 3♥ (625803) ties: (12001)
/// 22.K♣ 7♥ (1074500) T♥ 3♠ (625803) ties: (12001)
/// 23.K♣ 7♠ (1074500) T♠ 3♥ (625803) ties: (12001)
/// 24.K♥ 7♦ (1074500) T♦ 3♣ (625803) ties: (12001)
///
/// Type1223d - low suit matches low suit
/// K♥ 7♦ (1086089) T♠ 3♦ (614640) ties: (11575)
/// K♥ 7♣ (1086089) T♠ 3♣ (614640) ties: (11575)
/// K♣ 7♠ (1086089) T♦ 3♠ (614640) ties: (11575)
/// K♠ 7♥ (1086089) T♦ 3♥ (614640) ties: (11575)
/// K♠ 7♥ (1086089) T♣ 3♥ (614640) ties: (11575)
/// K♦ 7♣ (1086089) T♥ 3♣ (614640) ties: (11575)
/// K♠ 7♦ (1086089) T♣ 3♦ (614640) ties: (11575)
/// K♥ 7♠ (1086089) T♦ 3♠ (614640) ties: (11575)
/// K♦ 7♠ (1086089) T♣ 3♠ (614640) ties: (11575)
/// K♦ 7♥ (1086089) T♠ 3♥ (614640) ties: (11575)
/// K♣ 7♥ (1086089) T♠ 3♥ (614640) ties: (11575)
/// K♣ 7♦ (1086089) T♠ 3♦ (614640) ties: (11575)
/// K♦ 7♠ (1086089) T♥ 3♠ (614640) ties: (11575)
/// K♥ 7♣ (1086089) T♦ 3♣ (614640) ties: (11575)
/// K♠ 7♣ (1086089) T♦ 3♣ (614640) ties: (11575)
/// K♠ 7♦ (1086089) T♥ 3♦ (614640) ties: (11575)
/// K♦ 7♥ (1086089) T♣ 3♥ (614640) ties: (11575)
/// K♥ 7♠ (1086089) T♣ 3♠ (614640) ties: (11575)
/// K♠ 7♣ (1086089) T♥ 3♣ (614640) ties: (11575)
/// K♣ 7♠ (1086089) T♥ 3♠ (614640) ties: (11575)
/// K♦ 7♣ (1086089) T♠ 3♣ (614640) ties: (11575)
/// K♥ 7♦ (1086089) T♣ 3♦ (614640) ties: (11575)
/// K♣ 7♦ (1086089) T♥ 3♦ (614640) ties: (11575)
/// K♣ 7♥ (1086089) T♦ 3♥ (614640) ties: (11575)
/// ```
fn main() {
    // let case1 = Masked::from_str("A♠ J♥ T♠ 8♥").unwrap();
    let case2 = Masked::from_str("K♠ 7♦ T♠ 3♣").unwrap();

    println!("Auditing Case #1: {case2}");

    let baseline = HUPResult::from(&case2.shu);

    dump(&case2, &baseline);
    println!("=================");
    println!("=================");

    // let conn = Connection::open("generated/hups_07_31_2025.db").unwrap();

    for shift in case2.other_shifts() {
        let hupr = HUPResult::from(&shift.shu);
        dump(&case2, &hupr);
    }
}

fn dump(masked: &Masked, hupr: &HUPResult) {
    println!("-----");
    println!("{masked}");
    println!("{hupr}");
}
